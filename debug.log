INFO 2025-05-29 12:13:17,628 autoreload 148377 134545810408896 Watching for file changes with StatReloader
INFO 2025-05-29 12:14:14,505 autoreload 148510 134129173456320 Watching for file changes with StatReloader
INFO 2025-05-29 12:14:17,450 autoreload 148510 134129173456320 /home/dave/root/AgriConnect/AgriConnect/settings.py changed, reloading.
INFO 2025-05-29 12:15:01,584 ai_chatbot 148534 123875248567744 Creating new AIChatbot instance
INFO 2025-05-29 12:15:01,585 ai_chatbot 148534 123875248567744 Initializing AIChatbot...
INFO 2025-05-29 12:15:01,585 ai_chatbot 148534 123875248567744 Attempting to load Blenderbot model...
INFO 2025-05-29 12:15:01,585 ai_chatbot 148534 123875248567744 Using device: cpu
INFO 2025-05-29 12:15:01,585 ai_chatbot 148534 123875248567744 Loading tokenizer...
INFO 2025-05-29 12:15:12,250 ai_chatbot 148534 123875248567744 Tokenizer loaded successfully
INFO 2025-05-29 12:15:12,251 ai_chatbot 148534 123875248567744 Loading model...
INFO 2025-05-29 12:16:51,970 ai_chatbot 148534 123875248567744 Model loaded successfully
INFO 2025-05-29 12:16:52,028 ai_chatbot 148534 123875248567744 Testing model with sample input...
INFO 2025-05-29 12:17:50,281 ai_chatbot 148534 123875248567744 Model test successful. Test response:  I don't know how to get out of this place. I feel like I'm going to die.
INFO 2025-05-29 12:17:50,282 ai_chatbot 148534 123875248567744 Successfully loaded and tested Blenderbot model
INFO 2025-05-29 12:17:50,282 ai_chatbot 148534 123875248567744 AIChatbot initialization complete
INFO 2025-05-29 12:17:50,282 apps 148534 123875248567744 Chatbot app initialized
INFO 2025-05-29 12:17:50,475 autoreload 148534 123875248567744 Watching for file changes with StatReloader
WARNING 2025-05-29 12:18:09,785 log 148534 123870820316864 Not Found: /ws/notifications/
INFO 2025-05-29 12:18:16,542 views 148534 123870820316864 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:18:16,543 views 148534 123870820316864 Message 'hey' matched pattern '\b(?:hello|hi|hey|greetings|hola|bonjour)\b' with intent 'greeting'
INFO 2025-05-29 12:18:16,543 views 148534 123870820316864 Detected intent 'greeting' for message: 'hey'
INFO 2025-05-29 12:18:20,383 views 148534 123870820316864 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:18:20,384 views 148534 123870820316864 Message 'hello' matched pattern '\b(?:hello|hi|hey|greetings|hola|bonjour)\b' with intent 'greeting'
INFO 2025-05-29 12:18:20,384 views 148534 123870820316864 Detected intent 'greeting' for message: 'hello'
INFO 2025-05-29 12:18:33,404 views 148534 123870820316864 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:18:33,406 views 148534 123870820316864 Message 'how have you been doing lately?' matched pattern '\b(?:have|left|remain|stock)\b' with intent 'availability'
INFO 2025-05-29 12:18:33,407 views 148534 123870820316864 Detected intent 'availability' for message: 'how have you been doing lately?'
INFO 2025-05-29 12:18:40,906 views 148534 123870820316864 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:18:40,907 views 148534 123870820316864 No intent matched for message: 'sd'
INFO 2025-05-29 12:18:40,908 views 148534 123870820316864 Detected intent 'unknown' for message: 'sd'
INFO 2025-05-29 12:18:42,470 views 148534 123870820316864 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:18:42,471 views 148534 123870820316864 No intent matched for message: 'asdasdas'
INFO 2025-05-29 12:18:42,471 views 148534 123870820316864 Detected intent 'unknown' for message: 'asdasdas'
INFO 2025-05-29 12:20:29,016 autoreload 148534 123875248567744 /home/dave/root/AgriConnect/chatbot/ai_chatbot.py changed, reloading.
INFO 2025-05-29 12:21:08,006 ai_chatbot 149702 135661378049472 Creating new AIChatbot instance
INFO 2025-05-29 12:21:08,006 ai_chatbot 149702 135661378049472 Initializing AIChatbot...
INFO 2025-05-29 12:21:08,007 ai_chatbot 149702 135661378049472 Attempting to load Blenderbot model...
INFO 2025-05-29 12:21:08,007 ai_chatbot 149702 135661378049472 Using device: cpu
INFO 2025-05-29 12:21:08,007 ai_chatbot 149702 135661378049472 Loading tokenizer...
INFO 2025-05-29 12:21:08,755 ai_chatbot 149702 135661378049472 Tokenizer loaded successfully
INFO 2025-05-29 12:21:08,755 ai_chatbot 149702 135661378049472 Loading model...
INFO 2025-05-29 12:21:20,307 ai_chatbot 149702 135661378049472 Model loaded successfully
INFO 2025-05-29 12:21:20,308 ai_chatbot 149702 135661378049472 Testing model with sample input...
INFO 2025-05-29 12:21:29,807 ai_chatbot 149702 135661378049472 Model test successful. Test response:  I don't know how to get out of this place. I feel like I'm going to die.
INFO 2025-05-29 12:21:29,807 ai_chatbot 149702 135661378049472 Successfully loaded and tested Blenderbot model
INFO 2025-05-29 12:21:29,807 ai_chatbot 149702 135661378049472 AIChatbot initialization complete
INFO 2025-05-29 12:21:29,807 apps 149702 135661378049472 Chatbot app initialized
INFO 2025-05-29 12:21:29,967 autoreload 149702 135661378049472 Watching for file changes with StatReloader
WARNING 2025-05-29 12:21:45,628 log 149702 135659049944768 Not Found: /ws/notifications/
INFO 2025-05-29 12:21:51,750 views 149702 135659059386048 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:21:51,750 views 149702 135659059386048 Message 'hello' matched pattern '\b(?:hello|hi|hey|greetings|hola|bonjour)\b' with intent 'greeting'
INFO 2025-05-29 12:21:51,751 views 149702 135659059386048 Detected intent 'greeting' for message: 'Hello'
INFO 2025-05-29 12:21:54,686 views 149702 135659059386048 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:21:54,689 views 149702 135659059386048 No intent matched for message: 'sjkdad'
INFO 2025-05-29 12:21:54,689 views 149702 135659059386048 Detected intent 'unknown' for message: 'sjkdad'
INFO 2025-05-29 12:22:01,323 views 149702 135659059386048 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:22:01,323 views 149702 135659059386048 No intent matched for message: 'can't talk right now'
INFO 2025-05-29 12:22:01,323 views 149702 135659059386048 Detected intent 'unknown' for message: 'can't talk right now'
INFO 2025-05-29 12:22:04,915 views 149702 135659059386048 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:22:04,916 views 149702 135659059386048 No intent matched for message: 'really'
INFO 2025-05-29 12:22:04,916 views 149702 135659059386048 Detected intent 'unknown' for message: 'really'
INFO 2025-05-29 12:22:07,977 views 149702 135659059386048 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:22:07,977 views 149702 135659059386048 Message 'price' matched pattern '\b(?:price|cost|how much)\b' with intent 'price_inquiry'
INFO 2025-05-29 12:22:07,978 views 149702 135659059386048 Detected intent 'price_inquiry' for message: 'price'
INFO 2025-05-29 12:22:09,887 views 149702 135659059386048 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:22:09,887 views 149702 135659059386048 Message 'price' matched pattern '\b(?:price|cost|how much)\b' with intent 'price_inquiry'
INFO 2025-05-29 12:22:09,888 views 149702 135659059386048 Detected intent 'price_inquiry' for message: 'price'
INFO 2025-05-29 12:22:12,053 views 149702 135659059386048 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:22:12,054 views 149702 135659059386048 No intent matched for message: 'proice'
INFO 2025-05-29 12:22:12,054 views 149702 135659059386048 Detected intent 'unknown' for message: 'proice'
INFO 2025-05-29 12:22:15,734 views 149702 135659059386048 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:22:15,735 views 149702 135659059386048 Message 'price' matched pattern '\b(?:price|cost|how much)\b' with intent 'price_inquiry'
INFO 2025-05-29 12:22:15,735 views 149702 135659059386048 Detected intent 'price_inquiry' for message: 'price'
INFO 2025-05-29 12:22:17,536 views 149702 135659059386048 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:22:17,536 views 149702 135659059386048 Message 'price' matched pattern '\b(?:price|cost|how much)\b' with intent 'price_inquiry'
INFO 2025-05-29 12:22:17,537 views 149702 135659059386048 Detected intent 'price_inquiry' for message: 'price'
INFO 2025-05-29 12:22:19,447 views 149702 135659059386048 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:22:19,447 views 149702 135659059386048 Message 'price' matched pattern '\b(?:price|cost|how much)\b' with intent 'price_inquiry'
INFO 2025-05-29 12:22:19,447 views 149702 135659059386048 Detected intent 'price_inquiry' for message: 'price'
INFO 2025-05-29 12:22:23,170 views 149702 135659059386048 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:22:23,170 views 149702 135659059386048 No intent matched for message: 'why'
INFO 2025-05-29 12:22:23,170 views 149702 135659059386048 Detected intent 'unknown' for message: 'why'
INFO 2025-05-29 12:23:20,596 autoreload 149702 135661378049472 /home/dave/root/AgriConnect/chatbot/ai_chatbot.py changed, reloading.
INFO 2025-05-29 12:23:45,423 ai_chatbot 150437 127972459972032 Creating new AIChatbot instance
INFO 2025-05-29 12:23:45,423 ai_chatbot 150437 127972459972032 Initializing AIChatbot...
INFO 2025-05-29 12:23:45,424 ai_chatbot 150437 127972459972032 Attempting to load Blenderbot model...
INFO 2025-05-29 12:23:45,425 ai_chatbot 150437 127972459972032 Using device: cpu
INFO 2025-05-29 12:23:45,425 ai_chatbot 150437 127972459972032 Loading tokenizer...
INFO 2025-05-29 12:23:46,065 ai_chatbot 150437 127972459972032 Tokenizer loaded successfully
INFO 2025-05-29 12:23:46,065 ai_chatbot 150437 127972459972032 Loading model...
INFO 2025-05-29 12:23:49,671 ai_chatbot 150437 127972459972032 Model loaded successfully
INFO 2025-05-29 12:23:49,672 ai_chatbot 150437 127972459972032 Testing model with sample input...
INFO 2025-05-29 12:23:59,502 ai_chatbot 150437 127972459972032 Model test successful. Test response:  I don't know how to get out of this place. I feel like I'm going to die.
INFO 2025-05-29 12:23:59,502 ai_chatbot 150437 127972459972032 Successfully loaded and tested Blenderbot model
INFO 2025-05-29 12:23:59,503 ai_chatbot 150437 127972459972032 AIChatbot initialization complete
INFO 2025-05-29 12:23:59,503 apps 150437 127972459972032 Chatbot app initialized
INFO 2025-05-29 12:23:59,710 autoreload 150437 127972459972032 Watching for file changes with StatReloader
WARNING 2025-05-29 12:24:20,649 log 150437 127970123298496 Not Found: /ws/notifications/
INFO 2025-05-29 12:24:25,529 views 150437 127970131691200 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:24:25,530 views 150437 127970131691200 Message 'hi' matched pattern '\b(?:hello|hi|hey|greetings|hola|bonjour)\b' with intent 'greeting'
INFO 2025-05-29 12:24:25,530 views 150437 127970131691200 Detected intent 'greeting' for message: 'hi'
INFO 2025-05-29 12:24:29,208 views 150437 127970131691200 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:24:29,208 views 150437 127970131691200 Message 'hello' matched pattern '\b(?:hello|hi|hey|greetings|hola|bonjour)\b' with intent 'greeting'
INFO 2025-05-29 12:24:29,209 views 150437 127970131691200 Detected intent 'greeting' for message: 'hello'
INFO 2025-05-29 12:24:33,658 views 150437 127970131691200 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:24:33,658 views 150437 127970131691200 Message 'how are you?' matched pattern '\bhow are you\b' with intent 'greeting'
INFO 2025-05-29 12:24:33,659 views 150437 127970131691200 Detected intent 'greeting' for message: 'how are you?'
INFO 2025-05-29 12:24:40,243 views 150437 127970131691200 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:24:40,246 views 150437 127970131691200 No intent matched for message: 'oh come one'
INFO 2025-05-29 12:24:40,246 views 150437 127970131691200 Detected intent 'unknown' for message: 'oh come one'
INFO 2025-05-29 12:24:43,685 views 150437 127970131691200 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:24:43,685 views 150437 127970131691200 No intent matched for message: 'come on'
INFO 2025-05-29 12:24:43,686 views 150437 127970131691200 Detected intent 'unknown' for message: 'come on'
INFO 2025-05-29 12:30:02,966 autoreload 150437 127972459972032 /home/dave/root/AgriConnect/chatbot/views.py changed, reloading.
INFO 2025-05-29 12:30:25,354 ai_chatbot 151277 126323516114368 Creating new AIChatbot instance
INFO 2025-05-29 12:30:25,354 ai_chatbot 151277 126323516114368 Initializing AIChatbot...
INFO 2025-05-29 12:30:25,355 ai_chatbot 151277 126323516114368 Attempting to load Blenderbot model...
INFO 2025-05-29 12:30:25,355 ai_chatbot 151277 126323516114368 Using device: cpu
INFO 2025-05-29 12:30:25,355 ai_chatbot 151277 126323516114368 Loading tokenizer...
INFO 2025-05-29 12:30:27,445 ai_chatbot 151277 126323516114368 Tokenizer loaded successfully
INFO 2025-05-29 12:30:27,445 ai_chatbot 151277 126323516114368 Loading model...
INFO 2025-05-29 12:30:39,430 ai_chatbot 151277 126323516114368 Model loaded successfully
INFO 2025-05-29 12:30:39,440 ai_chatbot 151277 126323516114368 Testing model with sample input...
INFO 2025-05-29 12:30:50,099 ai_chatbot 151277 126323516114368 Model test successful. Test response:  I don't know how to get out of this place. I feel like I'm going to die.
INFO 2025-05-29 12:30:50,099 ai_chatbot 151277 126323516114368 Successfully loaded and tested Blenderbot model
INFO 2025-05-29 12:30:50,100 ai_chatbot 151277 126323516114368 AIChatbot initialization complete
INFO 2025-05-29 12:30:50,100 apps 151277 126323516114368 Chatbot app initialized
INFO 2025-05-29 12:30:50,178 autoreload 151277 126323516114368 Watching for file changes with StatReloader
INFO 2025-05-29 12:32:20,047 ai_chatbot 151631 133762424594560 Creating new AIChatbot instance
INFO 2025-05-29 12:32:20,047 ai_chatbot 151631 133762424594560 Initializing AIChatbot...
INFO 2025-05-29 12:32:20,047 ai_chatbot 151631 133762424594560 Attempting to load Blenderbot model...
INFO 2025-05-29 12:32:20,048 ai_chatbot 151631 133762424594560 Using device: cpu
INFO 2025-05-29 12:32:20,048 ai_chatbot 151631 133762424594560 Loading tokenizer...
INFO 2025-05-29 12:32:21,742 ai_chatbot 151631 133762424594560 Tokenizer loaded successfully
INFO 2025-05-29 12:32:21,742 ai_chatbot 151631 133762424594560 Loading model...
INFO 2025-05-29 12:32:28,652 ai_chatbot 151631 133762424594560 Model loaded successfully
INFO 2025-05-29 12:32:28,653 ai_chatbot 151631 133762424594560 Testing model with sample input...
INFO 2025-05-29 12:32:34,580 ai_chatbot 151631 133762424594560 Model test successful. Test response:  I don't know how to get out of this place. I feel like I'm going to die.
INFO 2025-05-29 12:32:34,580 ai_chatbot 151631 133762424594560 Successfully loaded and tested Blenderbot model
INFO 2025-05-29 12:32:34,581 ai_chatbot 151631 133762424594560 AIChatbot initialization complete
INFO 2025-05-29 12:32:34,581 apps 151631 133762424594560 Chatbot app initialized
INFO 2025-05-29 12:32:40,234 ai_chatbot 151842 131524549910656 Creating new AIChatbot instance
INFO 2025-05-29 12:32:40,234 ai_chatbot 151842 131524549910656 Initializing AIChatbot...
INFO 2025-05-29 12:32:40,234 ai_chatbot 151842 131524549910656 Attempting to load Blenderbot model...
INFO 2025-05-29 12:32:40,234 ai_chatbot 151842 131524549910656 Using device: cpu
INFO 2025-05-29 12:32:40,234 ai_chatbot 151842 131524549910656 Loading tokenizer...
INFO 2025-05-29 12:32:41,564 ai_chatbot 151842 131524549910656 Tokenizer loaded successfully
INFO 2025-05-29 12:32:41,564 ai_chatbot 151842 131524549910656 Loading model...
INFO 2025-05-29 12:32:47,770 ai_chatbot 151842 131524549910656 Model loaded successfully
INFO 2025-05-29 12:32:47,798 ai_chatbot 151842 131524549910656 Testing model with sample input...
INFO 2025-05-29 12:32:57,852 ai_chatbot 151842 131524549910656 Model test successful. Test response:  I don't know how to get out of this place. I feel like I'm going to die.
INFO 2025-05-29 12:32:57,853 ai_chatbot 151842 131524549910656 Successfully loaded and tested Blenderbot model
INFO 2025-05-29 12:32:57,853 ai_chatbot 151842 131524549910656 AIChatbot initialization complete
INFO 2025-05-29 12:32:57,853 apps 151842 131524549910656 Chatbot app initialized
INFO 2025-05-29 12:32:57,997 autoreload 151842 131524549910656 Watching for file changes with StatReloader
WARNING 2025-05-29 12:33:04,149 log 151842 131522157864640 Not Found: /ws/notifications/
INFO 2025-05-29 12:33:11,355 views 151842 131522166257344 Successfully retrieved product info for product ID: 9
INFO 2025-05-29 12:33:11,356 views 151842 131522166257344 Message 'hello' matched pattern '\b(?:hello|hi|hey|greetings|hola|bonjour)\b' with intent 'greeting'
INFO 2025-05-29 12:33:11,356 views 151842 131522166257344 Detected intent 'greeting' for message: 'hello'
INFO 2025-05-29 12:33:11,356 ai_chatbot 151842 131522166257344 Generating response for message: hello
INFO 2025-05-29 12:33:11,357 ai_chatbot 151842 131522166257344 Detected intent: greeting with analysis: {'info_needed': ['name'], 'is_followup': False}
INFO 2025-05-29 12:33:11,400 ai_chatbot 151842 131522166257344 Product context: {'name': 'Coffee', 'description': 'Ikawa yu Rwanda', 'price': Decimal('900'), 'quantity': 1903203, 'unit': 'g'}
INFO 2025-05-29 12:33:11,400 ai_chatbot 151842 131522166257344 Prepared input text: You are a helpful product assistant for Coffee in an agricultural marketplace. You can only provide information about this specific product. Here is the requested information:
- Name: Coffee
- Description: Ikawa yu Rwanda
- Price: 900
- Quantity: 1903203
- Unit: g

User intent: greeting
Instructions: Provide a clear, concise response using the provided information. If the user asks about other products, politely inform them that you can only help with this specific product. If any requested information is not available, politely inform the user and suggest contacting the seller directly.

User: hello
Assistant:
ERROR 2025-05-29 12:33:11,713 ai_chatbot 151842 131522166257344 Error generating AI response: index out of range in self
Traceback (most recent call last):
  File "/home/dave/root/AgriConnect/chatbot/ai_chatbot.py", line 416, in generate_response
    response_ids = self.model.generate(
                   ^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/torch/utils/_contextlib.py", line 115, in decorate_context
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/transformers/generation/utils.py", line 1593, in generate
    model_kwargs = self._prepare_encoder_decoder_kwargs_for_generation(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/transformers/generation/utils.py", line 742, in _prepare_encoder_decoder_kwargs_for_generation
    model_kwargs["encoder_outputs"]: ModelOutput = encoder(**encoder_kwargs)
                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/torch/nn/modules/module.py", line 1511, in _wrapped_call_impl
    return self._call_impl(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/torch/nn/modules/module.py", line 1520, in _call_impl
    return forward_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/transformers/models/blenderbot/modeling_blenderbot.py", line 722, in forward
    embed_pos = self.embed_positions(input_shape)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/torch/nn/modules/module.py", line 1511, in _wrapped_call_impl
    return self._call_impl(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/torch/nn/modules/module.py", line 1520, in _call_impl
    return forward_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/transformers/models/blenderbot/modeling_blenderbot.py", line 93, in forward
    return super().forward(positions)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/torch/nn/modules/sparse.py", line 163, in forward
    return F.embedding(
           ^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/torch/nn/functional.py", line 2237, in embedding
    return torch.embedding(weight, input, padding_idx, scale_grad_by_freq, sparse)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
IndexError: index out of range in self
ERROR 2025-05-29 12:33:11,753 ai_chatbot 151842 131522166257344 Error in generate_response: 'AIChatbot' object has no attribute '_format_unknown_response'
Traceback (most recent call last):
  File "/home/dave/root/AgriConnect/chatbot/ai_chatbot.py", line 416, in generate_response
    response_ids = self.model.generate(
                   ^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/torch/utils/_contextlib.py", line 115, in decorate_context
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/transformers/generation/utils.py", line 1593, in generate
    model_kwargs = self._prepare_encoder_decoder_kwargs_for_generation(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/transformers/generation/utils.py", line 742, in _prepare_encoder_decoder_kwargs_for_generation
    model_kwargs["encoder_outputs"]: ModelOutput = encoder(**encoder_kwargs)
                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/torch/nn/modules/module.py", line 1511, in _wrapped_call_impl
    return self._call_impl(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/torch/nn/modules/module.py", line 1520, in _call_impl
    return forward_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/transformers/models/blenderbot/modeling_blenderbot.py", line 722, in forward
    embed_pos = self.embed_positions(input_shape)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/torch/nn/modules/module.py", line 1511, in _wrapped_call_impl
    return self._call_impl(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/torch/nn/modules/module.py", line 1520, in _call_impl
    return forward_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/transformers/models/blenderbot/modeling_blenderbot.py", line 93, in forward
    return super().forward(positions)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/torch/nn/modules/sparse.py", line 163, in forward
    return F.embedding(
           ^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/.venv/lib/python3.12/site-packages/torch/nn/functional.py", line 2237, in embedding
    return torch.embedding(weight, input, padding_idx, scale_grad_by_freq, sparse)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
IndexError: index out of range in self

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/dave/root/AgriConnect/chatbot/ai_chatbot.py", line 457, in generate_response
    return self._rule_based_response(intent, product_context, message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/dave/root/AgriConnect/chatbot/ai_chatbot.py", line 508, in _rule_based_response
    'unknown': self._format_unknown_response(product_context)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'AIChatbot' object has no attribute '_format_unknown_response'. Did you mean: '_varied_unknown_response'?
ERROR 2025-05-29 12:33:11,756 views 151842 131522166257344 Error in chatbot_response: 'unknown'
INFO 2025-05-29 12:35:07,370 autoreload 151842 131524549910656 /home/dave/root/AgriConnect/chatbot/views.py changed, reloading.
INFO 2025-05-29 12:36:01,569 ai_chatbot 152261 139617453314176 Creating new AIChatbot instance
INFO 2025-05-29 12:36:01,569 ai_chatbot 152261 139617453314176 Initializing AIChatbot...
INFO 2025-05-29 12:36:01,570 ai_chatbot 152261 139617453314176 Attempting to load Blenderbot model...
INFO 2025-05-29 12:36:01,570 ai_chatbot 152261 139617453314176 Using device: cpu
INFO 2025-05-29 12:36:01,570 ai_chatbot 152261 139617453314176 Loading tokenizer...
INFO 2025-05-29 12:36:02,336 ai_chatbot 152261 139617453314176 Tokenizer loaded successfully
INFO 2025-05-29 12:36:02,337 ai_chatbot 152261 139617453314176 Loading model...
INFO 2025-05-29 12:36:14,761 ai_chatbot 152261 139617453314176 Model loaded successfully
INFO 2025-05-29 12:36:14,812 ai_chatbot 152261 139617453314176 Testing model with sample input...
INFO 2025-05-29 12:36:27,407 ai_chatbot 152261 139617453314176 Model test successful. Test response:  I don't know how to get out of this place. I feel like I'm going to die.
INFO 2025-05-29 12:36:27,407 ai_chatbot 152261 139617453314176 Successfully loaded and tested Blenderbot model
INFO 2025-05-29 12:36:27,408 ai_chatbot 152261 139617453314176 AIChatbot initialization complete
INFO 2025-05-29 12:36:27,408 apps 152261 139617453314176 Chatbot app initialized
INFO 2025-05-29 12:36:27,681 autoreload 152261 139617453314176 Watching for file changes with StatReloader
INFO 2025-05-29 12:36:42,174 autoreload 152261 139617453314176 /home/dave/root/AgriConnect/chatbot/ai_chatbot.py changed, reloading.
